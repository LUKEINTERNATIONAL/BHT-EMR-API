# Raw Data Store

This section documents the processes involved in pushing data from
the BHT-EMR-API's database to the Raw Data Store(RDS). The BHT-EMR-API
provides two mechanisms for this, namely:

  1. Push
    - This is a script that simply polls the database for changes and
      pushes them to the RDS using [CouchDB](https://couchdb.com) as
      a transport layer.
  2. Dump
    - This generates data dumps from the database that can be manually
      loaded into RDS.

## Configuring RDS

- Pending

## Running

1. Push

   To start the push process run:

      ```sh
      bin/rails r bin/rds_push.rb
      ```

2. Dump

   Dumping is two-fold, incremental and all. The incremental data dump
   is generated starting off from where either `rds_push` or itself left off
   when last run. The all dump on the other hand covers all records in the
   database. <strong>NOTE:</strong> The dumps generated by the commands
   described below are saved to `log/rds_dump.sql`.

   To generate incremental data dumps do:

      ```sh
      bin/rails r bin/rds_dump.rb
      ```

   To generate the all data dump do:

      ```sh
      bin/rails r bin/rds_dump.rb --all
      ```